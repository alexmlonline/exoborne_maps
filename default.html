<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exoborne - Community Maps</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- Azure Application Insights disabled to avoid blocked-by-client errors; safe to remove for functionality -->
  <!-- Link external CSS -->
  <link rel="stylesheet" href="styles.css">
  <link rel="llms" href="/llms.txt" />
</head>
<body>
  <!-- Mobile placeholder overlay -->
  <div id="mobile-placeholder">
    <div class="desktop-icon">
      <div class="monitor"></div>
      <div class="stand"></div>
    </div>
    <h2>Desktop Experience Only</h2>
    <p>Exoborne Community Maps is designed for desktop browsers. The interactive map requires a larger screen for the best experience.</p>
    <p>Please visit this site on a desktop or laptop computer.</p>
    <button class="continue-anyway" id="continue-anyway-btn">Continue Anyway</button>
  </div>

  <!-- Welcome placeholder overlay -->
  <div id="welcome-placeholder">
    <div class="welcome-content">
      <div class="welcome-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
        </svg>
      </div>
      <h2>Welcome to Exoborne Community Maps!</h2>
      <p><strong>PlayTest 2 (PT2) Access Only.</strong> This site is restricted to verified PT2 participants.</p>
      <p>By using this site you agree to follow all <span class="highlight">NDA</span> requirements for the playtest.</p>

      <div class="warning-message">
        <strong>NDA Reminder</strong>
        <p style="margin-top: 6px;">Clicking “Got it” means you acknowledge and agree to the PT2 NDA.</p>
        <p>Any sharing of content, data, screenshots, links, or information <em>outside</em> the PT2 group violates the game’s NDA.</p>
      </div>
      
      <ul class="feature-list">
        <li>Discover locations of <span class="highlight">Mobile Shelters, Bunkers, Clearance Fragments</span> and more</li>
        <li>Change views using heatmaps, guides, and other visualization layers to gain deeper insights</li>
        <li><span class="highlight">Add your own discoveries</span> to help fellow players by double-clicking or right-clicking on the map</li>
        <li>Select multiple POIs with Ctrl+Click to plan your routes efficiently</li>
        <li>Share specific locations with friends by using the URL</li>
      </ul>
      
      <p>Together, we can create an invaluable resource for the entire Exoborne community!</p>
      
      <div class="welcome-footer">
        <div class="never-show-again">
          <input type="checkbox" id="never-show-welcome" name="never-show-welcome">
          <label for="never-show-welcome">Never show again</label>
        </div>
        <button class="got-it-btn" id="welcome-got-it-btn">Got it — I agree to the NDA</button>
      </div>
    </div>
  </div>

  <div id="sidebar">
    <h2 id="page-title">Exoborne World Maps</h2>
    <div class="controls">
      <button id="add-mode-btn">Add Coordinate</button>
      <button id="refresh-btn">Refresh</button>
      <!-- <button id="session-btn">Session</button> -->
    </div>

    <!-- Add selection indicator -->
    <div id="selection-indicator" style="display: none; margin-top: 10px; background-color: #333; padding: 8px; border-radius: 4px; font-size: 13px;">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <span id="selection-count">0 POIs selected</span>
        <div>
          <button id="center-selection-btn" style="padding: 2px 8px; font-size: 12px; background-color: #555; margin-right: 5px;">Center</button>
          <button id="clear-selection-btn" style="padding: 2px 8px; font-size: 12px; background-color: #555;">Clear</button>
        </div>
      </div>
      <div id="selection-tip" style="margin-top: 5px; font-size: 11px; color: #aaa;">
        Use Ctrl+Click to select multiple POIs (max 10)
      </div>
    </div>

    <div id="poi-form">
      <label for="poi-type">Type:</label>
      <select id="poi-type">
        <option value="shelter">Mobile Shelter</option>
        <option value="bunker">Rebirth Bunker</option>
        <option value="container">Locked Containers</option>
        <option value="secret">Secret</option>
        <option value="fragment">Clearance Fragment</option>
        <option value="machinery">EC Kits/Machinery Parts</option>
        <option value="machinery" style="display: none;">Machinery Parts</option>
        <option value="ec-kits" style="display: none;">EC Kits</option>
        <option value="electronics">Home - Electronics</option>
        <option value="jewelries">Jewelries</option>
        <option value="toolboxes-luggage">Toolboxes/Luggage</option>        
        <option value="distilleries">Botkin Distilleries</option>
        <option value="helicopters">Helicopters</option>
        <option value="emp-jammer">Home - Drawers</option>
        <option value="vending">Vending Machines</option>
        <option value="collectibles">Collectibles</option>
        <option value="respawn">Respawns</option>
      </select>
      
      <div class="coordinate-inputs">
        <div class="coordinate-field">
          <label for="poi-x">X:</label>
          <input type="text" id="poi-x" placeholder="+0000">
        </div>
        <div class="coordinate-field">
          <label for="poi-y">Y:</label>
          <input type="text" id="poi-y" placeholder="+0000">
        </div>
      </div>
      
      <label for="poi-desc">Note:</label>
      <textarea id="poi-desc" placeholder="Add a note about this POI (shown on hover)"></textarea>
      <div id="nearby-poi-warning" class="warning-message" style="display: none;"></div>
      <button id="save-poi-btn">Save</button>
      <button id="cancel-poi-btn">Cancel</button>
    </div>

    <div id="poi-list">
        <div id="poi-groups-container">
            <!-- Money Making Category -->
            <div class="poi-category">
                <h4>Money Making <button class="select-all-btn">Only</button></h4>
                <div class="poi-group">
                    <div class="poi-group-header">
                        <input type="checkbox" id="group-shelter" class="group-checkbox" data-type="shelter" checked>
                        <label for="group-shelter" style="color: #ffd700">Mobile Shelters</label>
                        <button class="select-only-btn" data-type="shelter">Only</button>
                    </div>
                </div>
                <div class="poi-group">
                    <div class="poi-group-header">
                        <input type="checkbox" id="group-bunker" class="group-checkbox" data-type="bunker" checked>
                        <label for="group-bunker" style="color: #b8860b">Rebirth Bunkers</label>
                        <button class="select-only-btn" data-type="bunker">Only</button>
                    </div>
                </div>
                <div class="poi-group">
                  <div class="poi-group-header">
                      <input type="checkbox" id="group-containers" class="group-checkbox" data-type="container" checked>
                      <label for="group-containers" style="color: #9b8840">Locked Containers</label>
                      <button class="select-only-btn" data-type="container">Only</button>
                  </div>
              </div>                
                <div class="poi-group">
                    <div class="poi-group-header">
                        <input type="checkbox" id="group-secret" class="group-checkbox" data-type="secret" checked>
                        <label for="group-secret" style="color: #607d8b">Secrets</label>
                        <button class="select-only-btn" data-type="secret">Only</button>
                    </div>
                </div>
            </div>
            <!-- Resources Category -->
            <div class="poi-category">
                <h4>Resources <button class="select-all-btn">Only</button></h4>
                <div class="poi-group">
                    <div class="poi-group-header">
                        <input type="checkbox" id="group-fragment" class="group-checkbox" data-type="fragment" checked>
                      <label for="group-fragment" style="color: #73a575">Clearance Fragments</label>
                        <button class="select-only-btn" data-type="fragment">Only</button>
                    </div>
                </div>
                <div class="poi-group" style="display: none;">
                    <div class="poi-group-header">
                        <input type="checkbox" id="group-machinery" class="group-checkbox" data-type="machinery" checked>
                      <label for="group-machinery" style="color: #B0BEC5">EC Kits/Machinery Parts</label>
                        <button class="select-only-btn" data-type="machinery">Only</button>
                    </div>
                </div>
                <div class="poi-group">
                    <div class="poi-group-header">
                        <input type="checkbox" id="group-resource" class="group-checkbox" data-type="electronics" checked>
                      <label for="group-resource" style="color: #2196f3">Home - Electronics</label>
                        <button class="select-only-btn" data-type="electronics">Only</button>
                    </div>
                </div>
                <div class="poi-group">
                  <div class="poi-group-header">
                      <input type="checkbox" id="group-emp-jammer" class="group-checkbox" data-type="emp-jammer" checked>
                      <label for="group-emp-jammer" style="color: #8D6E63">Home - Drawers</label>
                      <button class="select-only-btn" data-type="emp-jammer">Only</button>
                  </div>
              </div>
                <div class="poi-group">
                  <div class="poi-group-header">
                      <input type="checkbox" id="group-jewelries" class="group-checkbox" data-type="jewelries" checked>
                      <label for="group-jewelries" style="color: #8E44AD">Jewelries</label>
                      <button class="select-only-btn" data-type="jewelries">Only</button>
                  </div>
              </div>
                <div class="poi-group">
                <div class="poi-group-header">
                    <input type="checkbox" id="group-loot" class="group-checkbox" data-type="toolboxes-luggage" checked>
                    <label for="group-loot" style="color: #FF9800">Toolboxes/Luggage</label>
                    <button class="select-only-btn" data-type="toolboxes-luggage">Only</button>
                </div>
            </div>                              
                <div class="poi-group">
                  <div class="poi-group-header">
                      <input type="checkbox" id="group-distilleries" class="group-checkbox" data-type="distilleries" checked>
                      <label for="group-distilleries" style="color: #B87333">Botkin Distilleries</label>
                      <button class="select-only-btn" data-type="distilleries">Only</button>
                  </div>
              </div>
                <div class="poi-group">
                  <div class="poi-group-header">
                      <input type="checkbox" id="group-helicopters" class="group-checkbox" data-type="helicopters" checked>
                      <label for="group-helicopters" style="color: #29B6F6">Helicopters</label>
                      <button class="select-only-btn" data-type="helicopters">Only</button>
                  </div>
              </div>
                <div class="poi-group">
                    <div class="poi-group-header">
                        <input type="checkbox" id="group-vending" class="group-checkbox" data-type="vending" checked>
                        <label for="group-vending" style="color: #00BCD4">Vending Machines</label>
                        <button class="select-only-btn" data-type="vending">Only</button>
                    </div>
                </div>
                <div class="poi-group">
                    <div class="poi-group-header">
                        <input type="checkbox" id="group-collectibles" class="group-checkbox" data-type="collectibles" checked>
                        <label for="group-collectibles" style="color: #FF69B4">Collectibles</label>
                        <button class="select-only-btn" data-type="collectibles">Only</button>
                    </div>
                </div>
                <div class="poi-group">
                  <div class="poi-group-header">
                      <input type="checkbox" id="group-respawn" class="group-checkbox" data-type="respawn" checked>
                      <label for="group-respawn" style="color: #76FF03">Respawns</label>
                      <button class="select-only-btn" data-type="respawn">Only</button>
                  </div>
              </div>
            </div>
        </div>
        <div class="filter-controls">
            <button id="select-all-btn" class="filter-btn">Select All</button>
            <button id="select-none-btn" class="filter-btn">Select None</button>
        </div>
        <div class="filter-controls" style="justify-content: center; margin-top: 5px;">
            <button id="show-unapproved-btn" class="filter-btn" style="display: none;">Show Unapproved</button>
        </div>
    </div>

    <!-- Legend Section -->
    <div id="map-legend" style="margin-top: 20px; font-size: 12px; color: #ccc;">
        <h3 style="margin-bottom: 10px; font-size: 14px; color: #fff; border-bottom: 1px solid #444; padding-bottom: 5px;">How to Use</h3>
        <ul style="list-style-type: none; padding-left: 0; margin-bottom: 0;">
            <li style="margin-bottom: 8px; display: flex; align-items: flex-start;">
                <span style="margin-right: 5px;">•</span>
                <span>Double click or right-click on map to add new markers</span>
            </li>
            <li style="margin-bottom: 8px; display: flex; align-items: flex-start;">
                <span style="margin-right: 5px;">•</span>
                <span>You can only delete and edit your own markers (shown with a green dot)</span>
            </li>
            <li style="margin-bottom: 8px; display: flex; align-items: flex-start;">
                <span style="margin-right: 5px;">•</span>
                <span>New markers appear with dashed lines until approved</span>
            </li>
            <!--
            <li style="margin-bottom: 8px; display: flex; align-items: flex-start;">
              <span style="margin-right: 5px;">•</span>
              <span><a href="#" id="create-new-session" style="color: #4CAF50; text-decoration: underline;">New Session</a></span>
            </li>
            -->
            <li style="margin-bottom: 8px; display: flex; align-items: flex-start;">
                <span style="margin-right: 5px;">•</span>
                <span>We review and approve markers regularly</span>
            </li>
            <li style="margin-bottom: 8px; display: flex; align-items: flex-start;">
                <span style="margin-right: 5px;">•</span>
                <span>Map coordinates match the game - use Add Coordinate button</span>
            </li>
            <li style="display: flex; align-items: flex-start;">
                <span style="margin-right: 5px;">•</span>
                <span>Issues or feedback? Reach out to us in Discord</span>
            </li>
        </ul>
        <div class="admin-controls" style="margin-top: 15px; padding-top: 10px; border-top: 1px solid #444; display: none;">
            <button id="admin-login-btn" class="admin-btn" style="width: 100%;">Admin Login</button>
            <div id="admin-status" style="display: none; margin-top: 8px; text-align: center;"></div>
        </div>
    </div>

    <div style="margin-top: auto; padding-top: 20px; border-top: 1px solid #444; position: sticky; bottom: 0; background-color: #272727;">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <a href="https://www.youtube.com/@warhogy" target="_blank"
           style="display: flex; align-items: center; color: #fff; text-decoration: none; padding: 10px 0;">
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="margin-right: 10px;">
             <path fill="#ff0000" d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
           </svg>
           Warhogy
        </a>
        <a href="https://discord.gg/3dXZ5D4g3w" target="_blank"
           style="display: flex; align-items: center; color: #fff; text-decoration: none; padding: 10px 0;">
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="margin-left: 10px;">
             <path fill="#5865F2" d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/>
           </svg>
        </a>
      </div>
    </div>
  </div>

  <div id="map-container">
    <div id="heatmap-overlay" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10; transform-origin: 0 0;"></div>
    <div id="guide-overlay" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 11; transform-origin: 0 0;"></div>
    <div class="watermark"></div>
    <div id="coordinates-display" style="position: absolute; top: 10px; left: 10px; background-color: rgba(0, 0, 0, 0.7); color: white; padding: 5px 10px; border-radius: 4px; z-index: 20; font-size: 14px;">
      X: 0, Y: 0
    </div>

    <div class="map-selector-container">
      <select id="map-select-overlay" disabled>
        <option value="maynard" selected>Maynard</option>
      </select>
      <div class="map-tooltip">Maynard</div>
    </div>

    <div class="left-controls">
      <div class="control-button-container">
        <button id="toggle-heatmap" title="TBD soon" disabled>🌡️</button>
      </div>
      <div class="control-button-container">
        <button id="toggle-guide" title="TBD soon" disabled>💡</button>
      </div>
    </div>

    <div id="game-map"></div>

    <div class="map-controls">
      <button id="zoom-in">+</button>
      <button id="zoom-out">-</button>
      <button id="reset-view">⟲</button>
    </div>
  </div>

  <div class="notification" id="notification"></div>
  <div id="context-menu"></div>

  <!-- Duplicate POI Confirmation Modal -->
  <div id="duplicate-confirm-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Duplicate POI Warning</h2>
        <button class="modal-close" id="duplicate-modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="warning-message" id="duplicate-modal-warning">
          <!-- Warning content will be inserted here dynamically -->
        </div>
        <p class="modal-question">Are you sure you want to add this POI?</p>
      </div>
      <div class="modal-footer">
        <button id="duplicate-confirm-btn" class="confirm-btn">Add Anyway</button>
        <button id="duplicate-cancel-btn" class="cancel-btn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Other Loot Modal -->
  <div id="other-loot-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Other Loot Items</h2>
        <button class="modal-close" id="close-loot-modal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="category-filter">
          <button class="category-btn active" data-category="all">All</button>
          <button class="category-btn" data-category="resources">Resources</button>
          <button class="category-btn" data-category="weapons">Weapons</button>
          <button class="category-btn" data-category="armor">Armor</button>
          <button class="category-btn" data-category="consumables">Consumables</button>
          <button class="category-btn" data-category="tools">Tools</button>
        </div>
        
        <div class="loot-container">
          <!-- Resources -->
          <div class="loot-item" data-category="resources">
            <div class="loot-image">
              <div class="loot-image-placeholder">🔋</div>
            </div>
            <div class="loot-details">
              <div class="loot-name">Power Cell</div>
              <div class="loot-description">A high-capacity energy cell used to power various electronic devices and machinery in Exoborne.</div>
              <span class="loot-rarity rarity-uncommon">Uncommon</span>
            </div>
          </div>
          
          <div class="loot-item" data-category="resources">
            <div class="loot-image">
              <div class="loot-image-placeholder">🧪</div>
            </div>
            <div class="loot-details">
              <div class="loot-name">Synthetic Polymer</div>
              <div class="loot-description">A versatile material used in crafting and repairs. Found in various containers throughout the world.</div>
              <span class="loot-rarity rarity-common">Common</span>
            </div>
          </div>
          
          <div class="loot-item" data-category="resources">
            <div class="loot-image">
              <div class="loot-image-placeholder">⚙️</div>
            </div>
            <div class="loot-details">
              <div class="loot-name">Precision Gears</div>
              <div class="loot-description">High-quality mechanical components essential for crafting advanced machinery and weapons.</div>
              <span class="loot-rarity rarity-rare">Rare</span>
            </div>
          </div>
          
          <!-- Weapons -->
          <div class="loot-item" data-category="weapons">
            <div class="loot-image">
              <div class="loot-image-placeholder">🔫</div>
            </div>
            <div class="loot-details">
              <div class="loot-name">Scavenger's Rifle</div>
              <div class="loot-description">A makeshift rifle assembled from salvaged parts. Despite its appearance, it's surprisingly reliable.</div>
              <span class="loot-rarity rarity-uncommon">Uncommon</span>
            </div>
          </div>
          
          <div class="loot-item" data-category="weapons">
            <div class="loot-image">
              <div class="loot-image-placeholder">🗡️</div>
            </div>
            <div class="loot-details">
              <div class="loot-name">Vibro-Blade</div>
              <div class="loot-description">A high-frequency cutting tool repurposed as a deadly melee weapon. Effective against both organic and synthetic targets.</div>
              <span class="loot-rarity rarity-rare">Rare</span>
            </div>
          </div>
          
          <!-- Armor -->
          <div class="loot-item" data-category="armor">
            <div class="loot-image">
              <div class="loot-image-placeholder">🛡️</div>
            </div>
            <div class="loot-details">
              <div class="loot-name">Reinforced Vest</div>
              <div class="loot-description">A basic protective vest that offers moderate protection against physical damage.</div>
              <span class="loot-rarity rarity-common">Common</span>
            </div>
          </div>
          
          <div class="loot-item" data-category="armor">
            <div class="loot-image">
              <div class="loot-image-placeholder">🪖</div>
            </div>
            <div class="loot-details">
              <div class="loot-name">Tactical Helmet</div>
              <div class="loot-description">A military-grade helmet with integrated communications and enhanced protection.</div>
              <span class="loot-rarity rarity-epic">Epic</span>
            </div>
          </div>
          
          <!-- Consumables -->
          <div class="loot-item" data-category="consumables">
            <div class="loot-image">
              <div class="loot-image-placeholder">💉</div>
            </div>
            <div class="loot-details">
              <div class="loot-name">Med-Injector</div>
              <div class="loot-description">A single-use medical device that rapidly heals wounds and reduces pain.</div>
              <span class="loot-rarity rarity-uncommon">Uncommon</span>
            </div>
          </div>
          
          <div class="loot-item" data-category="consumables">
            <div class="loot-image">
              <div class="loot-image-placeholder">🍖</div>
            </div>
            <div class="loot-details">
              <div class="loot-name">Preserved Rations</div>
              <div class="loot-description">Long-lasting food supplies that provide essential nutrients. Not tasty, but effective.</div>
              <span class="loot-rarity rarity-common">Common</span>
            </div>
          </div>
          
          <!-- Tools -->
          <div class="loot-item" data-category="tools">
            <div class="loot-image">
              <div class="loot-image-placeholder">🔧</div>
            </div>
            <div class="loot-details">
              <div class="loot-name">Multi-Tool</div>
              <div class="loot-description">A versatile tool that combines various functions needed for survival and crafting.</div>
              <span class="loot-rarity rarity-rare">Rare</span>
            </div>
          </div>
          
          <div class="loot-item" data-category="tools">
            <div class="loot-image">
              <div class="loot-image-placeholder">📡</div>
            </div>
            <div class="loot-details">
              <div class="loot-name">Signal Scanner</div>
              <div class="loot-description">A device that detects and analyzes various signals in the environment, useful for locating resources and avoiding dangers.</div>
              <span class="loot-rarity rarity-epic">Epic</span>
            </div>
          </div>
          
          <div class="loot-item" data-category="tools">
            <div class="loot-image">
              <div class="loot-image-placeholder">🔦</div>
            </div>
            <div class="loot-details">
              <div class="loot-name">Advanced Flashlight</div>
              <div class="loot-description">A durable, high-intensity light source with multiple modes and extended battery life.</div>
              <span class="loot-rarity rarity-uncommon">Uncommon</span>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <p style="color: #aaa; text-align: left; margin: 0;">
          Note: These items spawn randomly throughout the world and cannot be marked as fixed POIs on the map.
        </p>
      </div>
    </div>
  </div>

  <!-- Link external JS -->
  <script src="client.js"></script>
  <style>
    .left-controls {
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 15px;
      z-index: 20;
    }
    
    .control-button-container {
      display: flex;
      transform: translateX(-5px);
      transition: transform 0.3s ease;
    }
    
    .control-button-container:hover {
      transform: translateX(0);
    }

    #toggle-heatmap,
    #toggle-guide {
      width: 40px;
      height: 40px;
      color: white;
      border: none;
      border-radius: 0 6px 6px 0;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      padding: 0;
      box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.5), 0 0 15px rgba(0, 0, 0, 0.2);
      position: relative;
      overflow: hidden;
      z-index: 21;
    }
    
    .control-button-container::after {
      content: '';
      position: absolute;
      width: 40px;
      height: 10px;
      background: radial-gradient(ellipse at center, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0) 70%);
      left: 5px;
      top: 45px;
      border-radius: 50%;
      transform: scaleX(1.2);
      z-index: 19;
      opacity: 0.7;
      transition: all 0.3s ease;
      pointer-events: none;
    }
    
    .control-button-container:hover::after {
      transform: scaleX(1.4) scaleY(1.2);
      opacity: 0.8;
    }
    
    #toggle-heatmap::before,
    #toggle-guide::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.1);
      transform: translateY(-100%);
      transition: transform 0.3s ease;
    }
    
    #toggle-heatmap:hover::before,
    #toggle-guide:hover::before {
      transform: translateY(0);
    }

    #toggle-heatmap {
      background-color: #ff4444;
    }
    
    #toggle-guide {
      background-color: #ffa726;
    }
    
    #toggle-heatmap:hover {
      background-color: #ff6666;
      transform: scale(1.05);
      box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.6), 0 0 20px rgba(0, 0, 0, 0.3);
    }

    #toggle-guide:hover {
      background-color: #ffb74d;
      transform: scale(1.05);
      box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.6), 0 0 20px rgba(0, 0, 0, 0.3);
    }
    
    #toggle-heatmap.active {
      background-color: #4CAF50;
    }

    #toggle-guide.active {
      background-color: #4CAF50;
    }
    
    #toggle-heatmap.active:hover,
    #toggle-guide.active:hover {
      background-color: #45a049;
    }

    #guide-overlay {
      background-image: url(maps/Maynard_Transparent_Guide.png);
      background-size: cover;
      background-position: center;
      opacity: 0.9;
    }

    .map-selector-container {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 20;
    }
    
    .map-tooltip {
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      margin-top: 5px;
      white-space: nowrap;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }
    
    .map-selector-container:hover .map-tooltip {
      opacity: 1;
    }

    #map-select-overlay {
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 4px;
      padding: 6px 12px;
      font-size: 14px;
      cursor: pointer;
      min-width: 150px;
      text-align: center;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 8px center;
      background-size: 16px;
      padding-right: 32px;
    }

    #map-select-overlay:disabled {
      opacity: 0.8;
    }

    #map-select-overlay option {
      background-color: #1a1a1a;
      color: white;
    }

    #map-select-overlay option:disabled {
      color: #666;
      font-style: italic;
    }
  </style>
</body>
</html>
